From: fcvm <fcvm@local>
Subject: [PATCH 3/3] Add PSCI debug logging to emulate-nested.c

--- a/arch/arm64/kvm/emulate-nested.c
+++ b/arch/arm64/kvm/emulate-nested.c
@@ -2606,9 +2606,12 @@ static bool __forward_traps(struct kvm_vcpu *vcpu, unsigned int reg, u64 control
 {
 	if (is_nested_ctxt(vcpu) &&
 	    (__vcpu_sys_reg(vcpu, reg) & control_bit)) {
+		pr_debug("[KVM PSCI DEBUG] __forward_traps: forwarding trap\n");
 		kvm_inject_nested_sync(vcpu, kvm_vcpu_get_esr(vcpu));
 		return true;
 	}
+	pr_debug("[KVM PSCI DEBUG] __forward_traps: NOT forwarding, is_nested=%d\n",
+		 is_nested_ctxt(vcpu) ? 1 : 0);
 	return false;
 }
 
